package ru.contlog.mobile.helper.model

// Импорт класса LocalDateTime из библиотеки kotlinx-datetime для работы с датой и временем
// в типобезопасном и кроссплатформенном стиле
import kotlinx.datetime.LocalDateTime

// Импорт аннотации SerialName из kotlinx.serialization,
// позволяющей указать, какое имя поле имеет в JSON (особенно важно при нестандартных или кириллических именах)
import kotlinx.serialization.SerialName

// Импорт аннотации Serializable, помечающей класс как пригодный
// для автоматической сериализации и десериализации (например, при получении данных от API)
import kotlinx.serialization.Serializable

// Аннотация @Serializable указывает, что объект этого класса может быть
// автоматически преобразован из JSON в Kotlin-объект и обратно
// с использованием kotlinx.serialization
@Serializable

// Data-класс, представляющий продукт (товар, единицу учёта) в системе.
// Поля соответствуют структуре ответа сервера, включая кириллические названия JSON-ключей.
data class Product(

    // Уникальный идентификатор продукта. В JSON поле называется "ОбъектUID"
    @SerialName("ОбъектUID") val productUID: String,

    // Текущее состояние продукта (например, "Активен", "Архивный"). JSON-ключ: "Состояние"
    @SerialName("Состояние") val state: String,

    // Целочисленный код штрихкода. JSON-ключ: "КодШК"
    @SerialName("КодШК") val barcodeCode: Int,

    // Код продукта в виде строки (внутренний идентификатор в системе). JSON-ключ: "КодОбъекта"
    @SerialName("КодОбъекта") val productCode: String,

    // Строка штрихкода (например, "1234567890123"). JSON-ключ: "Штрихкод"
    @SerialName("Штрихкод") val barcode: String,

    // Название единицы измерения в человекочитаемом виде (например, "шт", "кг"). JSON-ключ: "ЕдиницаИзмеренияСтрокой"
    @SerialName("ЕдиницаИзмеренияСтрокой") val unitName: String,

    // Строковое представление ссылки на объект в системе (например, GUID или путь). JSON-ключ: "СсылкаОбъектСтрокой"
    @SerialName("СсылкаОбъектСтрокой") val productLinkString: String,

    // Дата и время создания записи. Используется тип kotlinx.datetime.LocalDateTime.
    // JSON-ключ: "ДатаСоздания"
    @SerialName("ДатаСоздания") val createdOn: LocalDateTime,

    // Тип единицы измерения (например, "Штуки", "Метры"). JSON-ключ: "Тип"
    @SerialName("Тип") val unitType: String,

    // Коэффициент штрихкода (например, сколько единиц товара содержится в одном штрихкоде). JSON-ключ: "КоэффициентШК"
    @SerialName("КоэффициентШК") val skCoefficient: Int,

    // Список мест хранения или размещения продукта. Каждый элемент — объект ProductPlace.
    // JSON-ключ: "Данные"
    @SerialName("Данные") val places: List<ProductPlace>,

    // Закомментированное поле для данных системы маркировки "Честный ЗНАК".
    // Тип Unit означал бы, что поле игнорируется при десериализации.
    // JSON-ключ: "ДанныеЧестныйЗнак"
//    @SerialName("ДанныеЧестныйЗнак") val fairMarkData: Unit,

    // Тип объекта (например, "Товар", "Материал", "Услуга"). JSON-ключ: "ТипОбъекта"
    @SerialName("ТипОбъекта") val objectType: String,
) {
    // Вычисляемое свойство: формирует URL изображения продукта на основе его UID.
    // Обратите внимание: в строке присутствует два пробела после "/img/" —
    // это сохранено как есть, согласно исходному коду (возможно, опечатка, но не исправляется по требованию).
    val imageSrc = "https://my.contlog.ru/img/${ if (places.isEmpty()) {productUID} else {places[0].nomenclatureUID}}"
}
